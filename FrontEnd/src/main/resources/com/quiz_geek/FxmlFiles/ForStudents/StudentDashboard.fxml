<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.BarChart?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.ChoiceBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>

<ScrollPane fx:id="rootScroll" fitToWidth="true" hbarPolicy="NEVER" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.quiz_geek.controllers.student.StudentDashboardController">
    <content>
        <VBox fillWidth="true" spacing="16.0" styleClass="createNewQuizContainer" stylesheets="@../../CssFiles/style.css">
            <children>
                <!-- Greeting and stats row -->
                <HBox spacing="16.0">
                    <children>
                        <VBox fx:id="leftColumn" spacing="16.0" HBox.hgrow="ALWAYS">
                            <children>
                                <VBox fx:id="cardGreeting" styleClass="section-card-dashboard">
                                    <children>
                                        <Label fx:id="greetingNameLabel" stylesheets="@../../CssFiles/style.css" text="Hello username">
                                 <styleClass>
                                    <String fx:value="label-veryLarge" />
                                    <String fx:value="label-bold" />
                                 </styleClass>
                              </Label>
                              <Label stylesheets="@../../CssFiles/style.css" text="It's good to see you.">
                                 <styleClass>
                                    <String fx:value="label-extraLarge" />
                                    <String fx:value="label-bold" />
                                 </styleClass>
                              </Label>
                                    </children>
                                    <padding>
                                        <Insets bottom="16" left="16" right="16" top="16" />
                                    </padding>
                                </VBox>

                                <HBox spacing="16.0">
                                    <children>
                              <HBox HBox.hgrow="ALWAYS">
                                 <children>
                                              <VBox fx:id="cardStreak" spacing="6.0" styleClass="section-card-dashboard" HBox.hgrow="ALWAYS">
                                                  <children>
                                                      <Label stylesheets="@../../CssFiles/style.css" text="Daily Streak">
                                             <styleClass>
                                                <String fx:value="label-secondaryColor" />
                                                <String fx:value="label-medium" />
                                                <String fx:value="label-bold" />
                                             </styleClass>
                                          </Label>
                                                      <Label fx:id="streakValueLabel" stylesheets="@../../CssFiles/style.css" text="0">
                                             <styleClass>
                                                <String fx:value="label-veryLarge" />
                                                <String fx:value="label-bold" />
                                                <String fx:value="label-secondaryColor" />
                                             </styleClass>
                                          </Label>
                                                  </children>
                                                  <padding>
                                                      <Insets bottom="16" left="16" right="16" top="16" />
                                                  </padding>
                                              </VBox>
                                 </children>
                              </HBox>
                                        <VBox fx:id="cardQuestions" spacing="6.0" styleClass="section-card-dashboard" HBox.hgrow="ALWAYS">
                                            <children>
                                                <Label stylesheets="@../../CssFiles/style.css" text="Questions completed">
                                       <styleClass>
                                          <String fx:value="label-medium" />
                                          <String fx:value="label-bold" />
                                       </styleClass>
                                    </Label>
                                                <Label fx:id="questionsCompletedLabel" stylesheets="@../../CssFiles/style.css" text="0">
                                       <styleClass>
                                          <String fx:value="label-secondaryColor" />
                                          <String fx:value="label-veryLarge" />
                                          <String fx:value="label-bold" />
                                       </styleClass>
                                    </Label>
                                            </children>
                                            <padding>
                                                <Insets bottom="16" left="16" right="16" top="16" />
                                            </padding>
                                        </VBox>
                                        <VBox fx:id="cardEnrolled" spacing="6.0" styleClass="section-card-dashboard" HBox.hgrow="ALWAYS">
                                            <children>
                                                <Label stylesheets="@../../CssFiles/style.css" text="Assessments Enrolled">
                                       <styleClass>
                                          <String fx:value="label-medium" />
                                          <String fx:value="label-bold" />
                                       </styleClass></Label>
                                                <Label fx:id="assessmentsEnrolledLabel" stylesheets="@../../CssFiles/style.css" text="0">
                                       <styleClass>
                                          <String fx:value="label-veryLarge" />
                                          <String fx:value="label-secondaryColor" />
                                          <String fx:value="label-bold" />
                                       </styleClass></Label>
                                            </children>
                                            <padding>
                                                <Insets bottom="16" left="16" right="16" top="16" />
                                            </padding>
                                        </VBox>
                                    </children>
                                </HBox>

                                <!-- Pies moved here side-by-side -->
                                <HBox spacing="16.0">
                                    <children>
                                        <VBox fx:id="cardAssessCompletion" spacing="10.0" styleClass="section-card-dashboard" HBox.hgrow="ALWAYS">
                                            <children>
                                                <Label text="Assessment Completion">
                                                    <styleClass>
                                                        <String fx:value="label-medium" />
                                                        <String fx:value="label-bold" />
                                                    </styleClass>
                                                </Label>
                                                <PieChart fx:id="pieCompletion" prefHeight="280" />
                                            </children>
                                            <padding>
                                                <Insets bottom="16" left="16" right="16" top="16" />
                                            </padding>
                                        </VBox>
                                        <VBox fx:id="cardGeneralEval" spacing="10.0" styleClass="section-card-dashboard" HBox.hgrow="ALWAYS">
                                            <children>
                                                <Label text="General Assessment Evaluation">
                                                    <styleClass>
                                                        <String fx:value="label-medium" />
                                                        <String fx:value="label-bold" />
                                                    </styleClass>
                                                </Label>
                                                <PieChart fx:id="pieEvaluation" prefHeight="280" />
                                            </children>
                                            <padding>
                                                <Insets bottom="16" left="16" right="16" top="16" />
                                            </padding>
                                        </VBox>
                                    </children>
                                </HBox>

                                <!-- Recent table -->
                                <VBox fx:id="cardRecent" spacing="10.0" styleClass="section-card-dashboard">
                                    <children>
                                        <Label stylesheets="@../../CssFiles/style.css" text="Recent">
                                 <styleClass>
                                    <String fx:value="label-medium" />
                                    <String fx:value="label-bold" />
                                 </styleClass></Label>
                                        <TableView fx:id="recentTable" prefHeight="260.0">
                                            <columns>
                                                <TableColumn fx:id="colSubject" prefWidth="150" text="Subject" />
                                                <TableColumn fx:id="colType" prefWidth="180" text="Type" />
                                                <TableColumn fx:id="colStatus" prefWidth="140" text="Status" />
                                                <TableColumn fx:id="colResult" prefWidth="140" text="Result" />
                                            </columns>
                                        </TableView>
                                    </children>
                                    <padding>
                                        <Insets bottom="16" left="16" right="16" top="16" />
                                    </padding>
                                </VBox>

                                <!-- Participation line chart -->
                                <VBox fx:id="cardParticipation" spacing="10.0" styleClass="section-card-dashboard">
                                    <children>
                                        <HBox alignment="CENTER_LEFT">
                                            <children>
                                                <Label stylesheets="@../../CssFiles/style.css" text="Participation">
                                       <styleClass>
                                          <String fx:value="label-medium" />
                                          <String fx:value="label-bold" />
                                       </styleClass></Label>
                                                <Pane HBox.hgrow="ALWAYS" />
                                                <ChoiceBox fx:id="participationRange" />
                                            </children>
                                        </HBox>
                                        <LineChart fx:id="lineParticipation" createSymbols="false">
                                            <xAxis>
                                                <CategoryAxis />
                                            </xAxis>
                                            <yAxis>
                                                <NumberAxis />
                                            </yAxis>
                                        </LineChart>
                                    </children>
                                    <padding>
                                        <Insets bottom="16" left="16" right="16" top="16" />
                                    </padding>
                                </VBox>
                            </children>
                        </VBox>

                        <VBox fx:id="rightColumn" prefWidth="360" spacing="16.0">
                            <children>
                                <!-- Calendar moved to top of right column -->
                                <VBox fx:id="cardCalendar" spacing="10.0" styleClass="section-card-dashboard">
                                    <children>
                                        <HBox alignment="CENTER_LEFT" spacing="8.0">
                                            <children>
                                                <Label stylesheets="@../../CssFiles/style.css" text="Calendar Streaks">
                                                    <styleClass>
                                                        <String fx:value="label-medium" />
                                                        <String fx:value="label-bold" />
                                                    </styleClass>
                                                </Label>
                                                <Pane HBox.hgrow="ALWAYS" />
                                                <ComboBox fx:id="monthCombo" prefWidth="140" />
                                                <ComboBox fx:id="yearCombo" prefWidth="100" />
                                            </children>
                                        </HBox>
                                        <GridPane fx:id="calendarGrid" hgap="6.0" vgap="6.0">
                                            <columnConstraints>
                                                <ColumnConstraints percentWidth="14.28" />
                                                <ColumnConstraints percentWidth="14.28" />
                                                <ColumnConstraints percentWidth="14.28" />
                                                <ColumnConstraints percentWidth="14.28" />
                                                <ColumnConstraints percentWidth="14.28" />
                                                <ColumnConstraints percentWidth="14.28" />
                                                <ColumnConstraints percentWidth="14.28" />
                                            </columnConstraints>
                                        </GridPane>
                                    </children>
                                    <padding>
                                        <Insets bottom="16" left="16" right="16" top="16" />
                                    </padding>
                                </VBox>

                                <!-- Recent table moved under calendar -->
                                <VBox fx:id="cardRecent" spacing="10.0" styleClass="section-card-dashboard">
                                    <children>
                                        <Label stylesheets="@../../CssFiles/style.css" text="Recent">
                                            <styleClass>
                                                <String fx:value="label-medium" />
                                                <String fx:value="label-bold" />
                                            </styleClass></Label>
                                        <TableView fx:id="recentTable" prefHeight="260.0">
                                            <columns>
                                                <TableColumn fx:id="colSubject" prefWidth="150" text="Subject" />
                                                <TableColumn fx:id="colType" prefWidth="180" text="Type" />
                                                <TableColumn fx:id="colStatus" prefWidth="140" text="Status" />
                                                <TableColumn fx:id="colResult" prefWidth="140" text="Result" />
                                            </columns>
                                        </TableView>
                                    </children>
                                    <padding>
                                        <Insets bottom="16" left="16" right="16" top="16" />
                                    </padding>
                                </VBox>

                                <VBox fx:id="cardEnrolledChart" spacing="10.0" styleClass="section-card-dashboard">
                                    <children>
                                        <Label text="Assessment Enrolled">
                                 <styleClass>
                                    <String fx:value="label-medium" />
                                    <String fx:value="label-bold" />
                                 </styleClass></Label>
                                        <BarChart fx:id="barEnrolled">
                                            <xAxis>
                                                <CategoryAxis />
                                            </xAxis>
                                            <yAxis>
                                                <NumberAxis />
                                            </yAxis>
                                        </BarChart>
                                    </children>
                                    <padding>
                                        <Insets bottom="16" left="16" right="16" top="16" />
                                    </padding>
                                </VBox>
                            </children>
                        </VBox>
                    </children>
                </HBox>
            </children>
            <padding>
                <Insets bottom="24" left="16" right="16" top="16" />
            </padding>
        </VBox>
    </content>
</ScrollPane>
